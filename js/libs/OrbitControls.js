"use strict";THREE.OrbitControls=function(a,b){function c(){return 2*Math.PI/60/60*F.autoRotateSpeed}function d(){return Math.pow(.95,F.zoomSpeed)}function e(a){N.theta-=a}function f(a){N.phi-=a}function g(a){F.object.isPerspectiveCamera?O/=a:F.object.isOrthographicCamera?(F.object.zoom=Math.max(F.minZoom,Math.min(F.maxZoom,F.object.zoom*a)),F.object.updateProjectionMatrix(),Q=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),F.enableZoom=!1)}function h(a){F.object.isPerspectiveCamera?O*=a:F.object.isOrthographicCamera?(F.object.zoom=Math.max(F.minZoom,Math.min(F.maxZoom,F.object.zoom/a)),F.object.updateProjectionMatrix(),Q=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),F.enableZoom=!1)}function i(a){R.set(a.clientX,a.clientY)}function j(a){X.set(a.clientX,a.clientY)}function k(a){U.set(a.clientX,a.clientY)}function l(a){S.set(a.clientX,a.clientY),T.subVectors(S,R).multiplyScalar(F.rotateSpeed);var b=F.domElement===document?F.domElement.body:F.domElement;e(2*Math.PI*T.x/b.clientHeight),f(2*Math.PI*T.y/b.clientHeight),R.copy(S),F.update()}function m(a){Y.set(a.clientX,a.clientY),Z.subVectors(Y,X),0<Z.y?g(d()):0>Z.y&&h(d()),X.copy(Y),F.update()}function n(a){V.set(a.clientX,a.clientY),W.subVectors(V,U).multiplyScalar(F.panSpeed),aa(W.x,W.y),U.copy(V),F.update()}function o(){}function p(a){a.preventDefault(),a.ctrlKey||(f(-.003*a.deltaY),e(-.003*a.deltaX))}function q(a){switch(a.keyCode){case F.keys.UP:aa(0,F.keyPanSpeed),F.update();break;case F.keys.BOTTOM:aa(0,-F.keyPanSpeed),F.update();break;case F.keys.LEFT:aa(F.keyPanSpeed,0),F.update();break;case F.keys.RIGHT:aa(-F.keyPanSpeed,0),F.update();}}function r(a){R.set(a.touches[0].pageX,a.touches[0].pageY)}function s(a){if(F.enableZoom){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);X.set(0,d)}if(F.enablePan){var e=.5*(a.touches[0].pageX+a.touches[1].pageX),f=.5*(a.touches[0].pageY+a.touches[1].pageY);U.set(e,f)}}function t(a){S.set(a.touches[0].pageX,a.touches[0].pageY),T.subVectors(S,R).multiplyScalar(F.rotateSpeed);var b=F.domElement===document?F.domElement.body:F.domElement;e(2*Math.PI*T.x/b.clientHeight),f(2*Math.PI*T.y/b.clientHeight),R.copy(S),F.update()}function u(a){if(F.enableZoom){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);Y.set(0,d),Z.set(0,Math.pow(Y.y/X.y,F.zoomSpeed)),g(Z.y),X.copy(Y)}if(F.enablePan){var e=.5*(a.touches[0].pageX+a.touches[1].pageX),f=.5*(a.touches[0].pageY+a.touches[1].pageY);V.set(e,f),W.subVectors(V,U).multiplyScalar(F.panSpeed),aa(W.x,W.y),U.copy(V)}F.update()}function v(){}function w(a){if(!1!==F.enabled){switch(a.preventDefault(),a.button){case F.mouseButtons.LEFT:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===F.enablePan)return;k(a),K=J.PAN}else{if(!1===F.enableRotate)return;i(a),K=J.ROTATE}break;case F.mouseButtons.MIDDLE:if(!1===F.enableZoom)return;j(a),K=J.DOLLY;break;case F.mouseButtons.RIGHT:if(!1===F.enablePan)return;k(a),K=J.PAN;}K!==J.NONE&&(document.addEventListener("mousemove",x,!1),document.addEventListener("mouseup",y,!1),F.dispatchEvent(H))}}function x(a){if(!1!==F.enabled)switch(a.preventDefault(),K){case J.ROTATE:if(!1===F.enableRotate)return;l(a);break;case J.DOLLY:if(!1===F.enableZoom)return;m(a);break;case J.PAN:if(!1===F.enablePan)return;n(a);}}function y(a){!1===F.enabled||(o(a),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",y,!1),F.dispatchEvent(I),K=J.NONE)}function z(a){!1===F.enabled||K!==J.NONE&&K!==J.ROTATE||(a.preventDefault(),a.stopPropagation(),F.dispatchEvent(H),p(a),F.dispatchEvent(I))}function A(a){!1===F.enabled||!1===F.enableKeys||!1===F.enablePan||q(a)}function B(a){if(!1!==F.enabled){switch(a.preventDefault(),a.touches.length){case 1:if(!1===F.enableRotate)return;r(a),K=J.TOUCH_ROTATE;break;case 2:if(!1===F.enableZoom&&!1===F.enablePan)return;s(a),K=J.TOUCH_DOLLY_PAN;break;default:K=J.NONE;}K!==J.NONE&&F.dispatchEvent(H)}}function C(a){if(!1!==F.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===F.enableRotate)return;if(K!==J.TOUCH_ROTATE)return;t(a);break;case 2:if(!1===F.enableZoom&&!1===F.enablePan)return;if(K!==J.TOUCH_DOLLY_PAN)return;u(a);break;default:K=J.NONE;}}function D(a){!1===F.enabled||(v(a),F.dispatchEvent(I),K=J.NONE)}function E(a){!1===F.enabled||a.preventDefault()}this.object=a,this.domElement=b===void 0?document:b,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return M.phi},this.getAzimuthalAngle=function(){return M.theta},this.saveState=function(){F.target0.copy(F.target),F.position0.copy(F.object.position),F.zoom0=F.object.zoom},this.reset=function(){F.target.copy(F.target0),F.object.position.copy(F.position0),F.object.zoom=F.zoom0,F.object.updateProjectionMatrix(),F.dispatchEvent(G),F.update(),K=J.NONE},this.update=function(){var b=new THREE.Vector3,d=new THREE.Quaternion().setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),f=d.clone().inverse(),g=new THREE.Vector3,h=new THREE.Quaternion;return function(){var a=F.object.position;return b.copy(a).sub(F.target),b.applyQuaternion(d),M.setFromVector3(b),F.autoRotate&&K===J.NONE&&e(c()),M.theta+=N.theta,M.phi+=N.phi,M.theta=Math.max(F.minAzimuthAngle,Math.min(F.maxAzimuthAngle,M.theta)),M.phi=Math.max(F.minPolarAngle,Math.min(F.maxPolarAngle,M.phi)),M.makeSafe(),M.radius*=O,M.radius=Math.max(F.minDistance,Math.min(F.maxDistance,M.radius)),F.target.add(P),b.setFromSpherical(M),b.applyQuaternion(f),a.copy(F.target).add(b),F.object.lookAt(F.target),!0===F.enableDamping?(N.theta*=1-F.dampingFactor,N.phi*=1-F.dampingFactor,P.multiplyScalar(1-F.dampingFactor)):(N.set(0,0,0),P.set(0,0,0)),O=1,!!(Q||g.distanceToSquared(F.object.position)>L||8*(1-h.dot(F.object.quaternion))>L)&&(F.dispatchEvent(G),g.copy(F.object.position),h.copy(F.object.quaternion),Q=!1,!0)}}(),this.dispose=function(){F.domElement.removeEventListener("contextmenu",E,!1),F.domElement.removeEventListener("mousedown",w,!1),F.domElement.removeEventListener("wheel",z,!1),F.domElement.removeEventListener("touchstart",B,!1),F.domElement.removeEventListener("touchend",D,!1),F.domElement.removeEventListener("touchmove",C,!1),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",y,!1),window.removeEventListener("keydown",A,!1)};var F=this,G={type:"change"},H={type:"start"},I={type:"end"},J={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},K=J.NONE,L=1e-6,M=new THREE.Spherical,N=new THREE.Spherical,O=1,P=new THREE.Vector3,Q=!1,R=new THREE.Vector2,S=new THREE.Vector2,T=new THREE.Vector2,U=new THREE.Vector2,V=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,Z=new THREE.Vector2,$=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),P.add(a)}}(),_=function(){var a=new THREE.Vector3;return function(b,c){!0===F.screenSpacePanning?a.setFromMatrixColumn(c,1):(a.setFromMatrixColumn(c,0),a.crossVectors(F.object.up,a)),a.multiplyScalar(b),P.add(a)}}(),aa=function(){var a=new THREE.Vector3;return function(b,c){var d=F.domElement===document?F.domElement.body:F.domElement;if(F.object.isPerspectiveCamera){var e=F.object.position;a.copy(e).sub(F.target);var f=a.length();f*=Math.tan(F.object.fov/2*Math.PI/180),$(2*b*f/d.clientHeight,F.object.matrix),_(2*c*f/d.clientHeight,F.object.matrix)}else F.object.isOrthographicCamera?($(b*(F.object.right-F.object.left)/F.object.zoom/d.clientWidth,F.object.matrix),_(c*(F.object.top-F.object.bottom)/F.object.zoom/d.clientHeight,F.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),F.enablePan=!1)}}();F.domElement.addEventListener("contextmenu",E,!1),F.domElement.addEventListener("mousedown",w,!1),F.domElement.addEventListener("wheel",z,!1),F.domElement.addEventListener("touchstart",B,!1),F.domElement.addEventListener("touchend",D,!1),F.domElement.addEventListener("touchmove",C,!1),window.addEventListener("keydown",A,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function a(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function a(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function b(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!a}},noRotate:{get:function a(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function b(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!a}},noPan:{get:function a(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function b(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!a}},noKeys:{get:function a(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function b(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!a}},staticMoving:{get:function a(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function b(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!a}},dynamicDampingFactor:{get:function a(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function b(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=a}}});
