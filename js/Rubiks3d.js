"use strict";var Rubiks3d={colors:{white:16777215,green:1215800,red:10879015,blue:209052,yellow:16698633,orange:16465927}};Rubiks3d.Cube=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"UUUUUUUUUFFFFFFFFFDDDDDDDDDLLLLLLLLLRRRRRRRRRBBBBBBBBB",d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:[0,0,0],e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,f=5<arguments.length&&arguments[5]!==void 0?arguments[5]:1,g=6<arguments.length&&arguments[6]!==void 0?arguments[6]:"default";this.cubeSize=b,this.cubeSpacing=b/3*e,this.cubeletSize=(b-3*this.cubeSpacing)/3,this.scene=a,this.cubeString=c,this.cubeStringObject={U:this.cubeString.slice(0,9),F:this.cubeString.slice(9,18),D:this.cubeString.slice(18,27),L:this.cubeString.slice(27,36),R:this.cubeString.slice(36,45),B:this.cubeString.slice(45,54)},this.startingPosition=d,this.spacingPercentage=e,this.lineWidth=f,this.colorMappings=g,"default"===this.colorMappings&&(this.colorMappings={U:Rubiks3d.colors.white,F:Rubiks3d.colors.red,D:Rubiks3d.colors.yellow,L:Rubiks3d.colors.green,R:Rubiks3d.colors.blue,B:Rubiks3d.colors.orange}),this.isVisible=!1,this.cubeStringMappings={FB:{y:{0:[6,7,8],1:[3,4,5],2:[0,1,2]},x:{0:[0,3,6],1:[1,4,7],2:[2,5,8]}},UD:{x:{0:[0,3,6],1:[1,4,7],2:[2,5,8]},z:{0:[0,1,2],1:[3,4,5],2:[6,7,8]}},RL:{y:{0:[6,7,8],1:[3,4,5],2:[0,1,2]},z:{0:[0,3,6],1:[1,4,7],2:[2,5,8]}}},this._setVisible=function(a){for(var b=0;b<this.cubelets.length;b++)this.cubelets[b].mesh.visible=a},this._createMaterialArray=function(a){for(var b=[],c=0;6>c;c++)b.push(new THREE.MeshBasicMaterial({color:a[c],polygonOffset:!0,polygonOffsetFactor:.5,polygonOffsetUnits:.5}));return b},this._intersection=function(a,b){return a.filter(function(a){return-1!==b.indexOf(a)})},this._initCubeletsFromCubeString=function(b,c){for(var d=[],e=0;3>e;e++)for(var f=0;3>f;f++)for(var g=0;3>g;g++){var h,j=new THREE.BoxGeometry(this.cubeletSize,this.cubeletSize,this.cubeletSize),k=[,,,,,,];0==g&&(h=this._intersection(this.cubeStringMappings.FB.y[f],this.cubeStringMappings.FB.x[e])[0],k[5]=c[b.B[h]]),2==g&&(h=this._intersection(this.cubeStringMappings.FB.y[f],this.cubeStringMappings.FB.x[e])[0],k[4]=c[b.F[h]]),0==f&&(h=this._intersection(this.cubeStringMappings.UD.z[g],this.cubeStringMappings.UD.x[e])[0],k[3]=c[b.D[h]]),2==f&&(h=this._intersection(this.cubeStringMappings.UD.z[g],this.cubeStringMappings.UD.x[e])[0],k[2]=c[b.U[h]]),0==e&&(h=this._intersection(this.cubeStringMappings.RL.y[f],this.cubeStringMappings.RL.z[g])[0],k[1]=c[b.L[h]]),2==e&&(h=this._intersection(this.cubeStringMappings.RL.y[f],this.cubeStringMappings.RL.z[g])[0],k[0]=c[b.R[h]]);for(var l=k.slice(),m=0,n=0;n<l.length;n++)"undefined"==typeof l[n]&&(m+=1,l[n]=Rubiks3d.colors.white);var o="";3===m?o="corner":4===m?o="edge":5===m?o="center":6===m?o="middleCube":void 0;var p=this._createMaterialArray(l),q=new THREE.Mesh(j,p),r=new THREE.EdgesGeometry(q.geometry),s=new THREE.LineBasicMaterial({color:0,linewidth:this.lineWidth}),t=new THREE.LineSegments(r,s);q.add(t),q.position.set(e*this.cubeletSize+e*this.cubeSpacing+this.startingPosition[0],f*this.cubeletSize+f*this.cubeSpacing+this.startingPosition[1],g*this.cubeletSize+g*this.cubeSpacing+this.startingPosition[2]),q.visible=this.visible,a.add(q),d.push(new Rubiks3d.Cube.Cubelet(q,k,o))}return d},this.cubelets=this._initCubeletsFromCubeString(this.cubeStringObject,this.colorMappings)},Rubiks3d.Cube.Cubelet=function(a,b,c){"use strict";this.mesh=a,this.materials=b,this.pieceType=c},Object.defineProperty(Rubiks3d.Cube.prototype,"visible",{set:function b(a){"use strict";this._setVisible(a),this.isVisible=a},get:function a(){"use strict";return this.isVisible}});
